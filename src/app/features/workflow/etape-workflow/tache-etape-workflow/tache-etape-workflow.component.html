<!--                1 tache-->
<nb-card class="tacheClass">
    <nb-card-header>
        <div class="tacheHeader">
            <h6 (click)="showDetails(dialog)" class="tacheNomClass">{{tache.id}} : {{tache.nom}}</h6>
            <div *ngIf="tache.tacheEnfants.length != 0">
                <nb-icon *ngIf="!estDetail" (click)="clickDetails(true)"  status="info" icon="arrow-circle-down-outline"></nb-icon>
                <nb-icon *ngIf="estDetail" (click)="clickDetails(false)" status="warning" icon="arrow-circle-up-outline"></nb-icon>
            </div>
        </div>
    </nb-card-header>
    <nb-card-body>
        <p>Responsable:
            <label *ngIf="tache.utilisateurAffecte" class="tacheResponsableClass">{{tache.utilisateurAffecte.pseudo}}</label>
            <label *ngIf="!tache.utilisateurAffecte" class="tacheAucunResponsableClass">aucun</label>
        </p>
        <p>{{tache.estimationTemps}} ({{tache.uniteDeTemps}})</p>
        <div *ngIf="estDetail">
            <app-tache-etape-workflow *ngFor="let te of tache.tacheEnfants" [tache]="te" [estProgression]="estProgression" [estDetail]="estDetail" [membresProjet]="membresProjet" (outputProjet)="updateProjet($event)"></app-tache-etape-workflow>
        </div>
        <button nbButton (click)="showDetails(dialog)">Detail</button>
    </nb-card-body>
    <nb-card-footer *ngIf="estProgression && tache.tacheEnfants.length != 0">
        <nb-progress-bar [value]="50" status="success"></nb-progress-bar>
    </nb-card-footer>
</nb-card>

<!--modal details tache-->
<ng-template #dialog let-ref="dialogRef">
    <nb-card style="display: flex" accent="success" size="giant">
        <nb-card-header class="headerModal">
            <div class="exitClass">
                <nb-icon (click)="ref.close()"  icon="close-circle-outline"></nb-icon>
            </div>
            <div class="titleModal">
                <h4>{{tache.id}} : {{tache.nom}}</h4>
            </div>
        </nb-card-header>
        <nb-card-body>
            <table>
                <td>
                    <div>
                        <nb-user *ngIf="membreAssigne !== undefined" [name]="membreAssigne.utilisateur.pseudo" [title]="membreAssigne.role.nom">
                            <nb-icon icon="close-circle-outline"></nb-icon>
                        </nb-user>
                        <div *ngIf="membreAssigne === undefined">
                            <label>Assigner la tache</label>
                            <nb-icon icon="plus-circle-outline"></nb-icon>
                        </div>
                        <p>priorit√© a definir</p>
                        <p>{{tache.estimationTemps}} ({{tache.uniteDeTemps}})</p>
                        <h5>Description :</h5>
                        <p>{{tache.description}}</p>
                    </div>
                </td>
                <td>
                    <div>
                        <button disabled nbButton>Modidier la tache</button>
                        <div>
                            <nb-card accent="warning" size="tiny">
                                <nb-card-header>
                                    Taches Precedente
                                </nb-card-header>
                                <nb-list title="Taches P">
                                    <nb-list-item *ngFor="let tacheP of tache.tachesPrecedentes">
                                        <nb-icon *ngIf="checkValidation(tacheP)" status="success" icon="checkmark-circle-outline" ></nb-icon>
                                        {{tacheP.id}} : {{tacheP.nom}}
                                    </nb-list-item>
                                </nb-list>
                            </nb-card>
                        </div>
                        <div>
                            <nb-card accent="warning" size="tiny">
                                <nb-card-header>
                                    Taches Enfant
                                </nb-card-header>
                                <nb-list title="Taches Enfant">
                                    <nb-list-item *ngFor="let tacheEnfant of tache.tacheEnfants">
                                        <nb-icon *ngIf="checkValidation(tacheEnfant)" status="success" icon="checkmark-circle-outline" ></nb-icon>
                                        {{tacheEnfant.id}} : {{tacheEnfant.nom}}
                                    </nb-list-item>
                                </nb-list>
                            </nb-card>
                        </div>

                    </div>
                </td>
            </table>
        </nb-card-body>
        <nb-card-footer class="footerModal" >
            <div class="footerButtons">
                <button nbButton [disabled]="estValidee" (click)="valider()">Valider</button>
                <button disabled nbButton>Supprimer</button>
            </div>
        </nb-card-footer>
    </nb-card>
</ng-template>
